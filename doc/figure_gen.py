# -*- coding: utf-8 -*-

from os import lseek
from intelhex import IntelHex

# +-> X
# |
# v
# Y

I = ['0000', '#000', '0000', '#000',
     '####', '#000', '####', '#000',
     '0000', '#000', '0000', '#000',
     '0000', '#000', '0000', '#000']

J = ['#000', '0#00', '###0', '##00',
     '###0', '0#00', '00#0', '#000',
     '0000', '##00', '0000', '#000',
     '0000', '0000', '0000', '0000']

L = ['00#0', '##00', '###0', '#000',
     '###0', '0#00', '#000', '#000',
     '0000', '0#00', '0000', '##00',
     '0000', '0000', '0000', '0000']

O = ['##00', '##00', '##00', '##00',
     '##00', '##00', '##00', '##00',
     '0000', '0000', '0000', '0000',
     '0000', '0000', '0000', '0000']

S = ['0##0', '#000', '0##0', '#000',
     '##00', '##00', '##00', '##00',
     '0000', '0#00', '0000', '0#00',
     '0000', '0000', '0000', '0000']

T = ['0#00', '0#00', '###0', '#000',
     '###0', '##00', '0#00', '##00',
     '0000', '0#00', '0000', '#000',
     '0000', '0000', '0000', '0000']

Z = ['##00', '0#00', '##00', '0#00',
     '0##0', '##00', '0##0', '##00',
     '0000', '#000', '0000', '#000',
     '0000', '0000', '0000', '0000']

coord = []

for i in [I, J, L, O, S, T, Z]:
    for f in range(4):
        for x in range(4):
            for y in range(4):
                if i[f + y*4][x] == '#':
                    coord.append((x, y))

# print(coord)

'''
MSB             LSB
0000 0000 0000 0000
                 \--x0
               \----x1
            \-------x2
          \---------x3
       \------------y0
     \--------------y1
  \-----------------y2
\-------------------y3
'''

offset = 32

hex = IntelHex()
for i in range(int(len(coord) / 4)):
     s = coord[i*4:i*4+4]
     hex.puts(i,          bytes([s[0][0] + (s[1][0] << 2) + (s[2][0] << 4) + (s[3][0] << 6)]))
     hex.puts(i + offset, bytes([s[0][1] + (s[1][1] << 2) + (s[2][1] << 4) + (s[3][1] << 6)]))
hex.write_hex_file('figure.hex', byte_count = 8)

print('Writed {} bytes.'.format(hex.maxaddr() + 1))
